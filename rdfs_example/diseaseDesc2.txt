@instance_var x
@value_var a
@hierarchy_var z

@targetType http://ehr/data/vocab/disease_pair

@target rr

@attribute rr
NUMERIC=
aggregator=NONE
numericEstimator=BINNED:0.05
{
?x <http://ehr/data/vocab/relative_risk> ?a .
}

@attribute degree1Exp
NUMERIC=
aggregator=NONE
numericEstimator=EXPONENTIAL
{
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
FILTER(?d1 > ?d2)
?d1 <http://ehr/data/vocab/has_degree> ?a .
}

@attribute degree2Exp
NUMERIC=
aggregator=NONE
numericEstimator=EXPONENTIAL
{
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
FILTER(?d1 > ?d2)
?d2 <http://ehr/data/vocab/has_degree> ?a .
}

@attribute degreeGau
NUMERIC=
aggregator=COUNT
numericEstimator=GAUSSIAN
{
?x <http://ehr/data/vocab/has_disease> ?d .
?a <http://ehr/data/vocab/has_disease> ?d .
?a <http://ehr/data/vocab/relative_risk> ?ar .
FILTER(?ar > 0.05)
FILTER (?x != ?a)
}

@attribute degDiff
NUMERIC=
aggregator=NONE
numericEstimator=GAUSSIAN
{
{
SELECT ?x (?d1deg - ?d2deg) as ?a {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
?d1 <http://ehr/data/vocab/has_degree> ?d1deg .
?d2 <http://ehr/data/vocab/has_degree> ?d2deg .
FILTER(?d1 != ?d2)
FILTER(?d1deg >= ?d2deg) } }
}

@attribute typeTriadPerc1
NUMERIC=
aggregator=NONE
numericEstimator=GAUSSIAN
hierarchyRoot=http://purl.bioontology.org/ontology/HOM-ICD9CM/MM_CLASS_4999
{
{
SELECT ?x (1.0 * (?n1 + ?n2) / (?d1deg + ?d2deg)) as ?a {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
FILTER(?d1 > ?d2)
?d1 <http://ehr/data/vocab/has_degree> ?d1deg .
?d2 <http://ehr/data/vocab/has_degree> ?d2deg .

{
SELECT ?x count(?da) as ?n1 {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
?da <http://ehr/data/vocab/has_disease> ?d1 .
?da <http://ehr/data/vocab/has_disease> ?d3 .
?da <http://ehr/data/vocab/relative_risk> ?ar .
FILTER(?ar > 0.05)
FILTER (?d1 > ?d2 && ?d1 != ?d3)
?d3 a ?z .
<HIERARCHY>
} group by ?x }

{
SELECT ?x count(?da) as ?n2 {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
?da <http://ehr/data/vocab/has_disease> ?d2 .
?da <http://ehr/data/vocab/has_disease> ?d3 .
?da <http://ehr/data/vocab/relative_risk> ?ar .
FILTER(?ar > 0.05)
FILTER (?d1 > ?d2 && ?d2 != ?d3)
?d3 a ?z .
<HIERARCHY>
} group by ?x } } }
}

@attribute typeTriadPerc2
NUMERIC=
aggregator=NONE
numericEstimator=GAUSSIAN
hierarchyRoot=http://purl.bioontology.org/ontology/HOM-ICD9CM/MM_CLASS_4999
{
{
SELECT ?x (1.0 * (?n1 - ?n2)*(?n1 - ?n2) / (?d1deg + ?d2deg)) as ?a {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
FILTER(?d1 > ?d2)
?d1 <http://ehr/data/vocab/has_degree> ?d1deg .
?d2 <http://ehr/data/vocab/has_degree> ?d2deg .

{
SELECT ?x count(?da) as ?n1 {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
?da <http://ehr/data/vocab/has_disease> ?d1 .
?da <http://ehr/data/vocab/has_disease> ?d3 .
?da <http://ehr/data/vocab/relative_risk> ?ar .
FILTER(?ar > 0.05)
FILTER (?d1 > ?d2 && ?d1 != ?d3)
?d3 a ?z .
<HIERARCHY>
} group by ?x }

{
SELECT ?x count(?da) as ?n2 {
?x <http://ehr/data/vocab/has_disease> ?d1 .
?x <http://ehr/data/vocab/has_disease> ?d2 .
?da <http://ehr/data/vocab/has_disease> ?d2 .
?da <http://ehr/data/vocab/has_disease> ?d3 .
?da <http://ehr/data/vocab/relative_risk> ?ar .
FILTER(?ar > 0.05)
FILTER (?d1 > ?d2 && ?d2 != ?d3)
?d3 a ?z .
<HIERARCHY>
} group by ?x } } }
}